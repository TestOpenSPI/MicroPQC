<p align="right">
  <a href="09.project-structure.md">English</a> | <a href="../09.project-structure.md">한국어</a>
</p>

# Project Structure

This document explains the directory layout and the role of each component.

## Top-level layout

```
MicroPQC/
├── applications/         # Application code
├── boards/               # Board support files
├── cpu/                  # CPU / low-level code
├── doc/                  # Documentation
├── drivers/              # Hardware drivers
├── extmodules/           # External modules
├── makefiles/            # Build system
├── os/                   # RTOS / OS abstraction
├── scripts/              # Build scripts
├── secure/               # Secure firmware (binaries / sources)
├── sys/                  # System services & utilities
├── tools/                # Development tools
├── Makefile.base         # Base Makefile
├── Makefile.include      # Common build settings
└── README.md             # Project overview
```

## Key directories

### applications

Directory for user application code.

```
applications/
└── helloworld/
    ├── main.c              # Main entry point
    ├── commands.c          # Shell command implementations
    ├── Makefile            # Build configuration
    ├── bin/                # Build outputs
    └── include/            # FreeRTOS configuration
        ├── FreeRTOSConfig.h
        └── FreeRTOSConfig_tz.h
```

**Role**
- Implement application logic
- Add custom shell commands
- Configure FreeRTOS

### boards

Board-specific initialization and peripheral configuration.

```
boards/
└── SHIELD_M2354/
    ├── board.c             # Board initialization
    ├── periph_conf.c       # Peripheral configuration
    ├── extflash.c          # External flash
    ├── Makefile            # Board build configuration
    ├── _test/              # Board tests
    └── include/
        ├── board.h
        └── periph_conf.h
```

**Role**:
- Board initialization
- Peripheral configuration

### cpu

Low-level CPU-related code.

```
cpu/
└── nuvoton_m2354/
    ├── cpu.c               # CPU initialization
    ├── m2354.ld            # Linker script
    ├── periph_wrap.c       # Peripheral wrapper
    ├── pin_def.c           # Pin definitions
    ├── Makefile
    ├── _test/
    └── include/
        ├── cpu.h
        ├── periph_api.h
        └── periph_def.h
```

**Role**:
- CPU initialization and configuration
- Memory layout definition

### extmodules

External libraries and modules.

```
extmodules/
├── FREERTOS-Kernel/        # FreeRTOS sources
│   ├── License/
│   └── Source/
│       ├── portable/       # Porting layer
│       ├── include/        # Header files
│       └── *.c             # Core sources
└── M2354BSP/               # M2354 BSP
    └── Library/
        ├── CMSIS/          # ARM CMSIS
        ├── Device/         # Device headers
        ├── LCDLib/         # LCD
        └── StdDriver/      # Standard drivers
```

**Role**:
- FreeRTOS kernel sources
- Nuvoton M2354 BSP

### makefiles

Makefiles for the build system.

```
makefiles/
├── Makefile.dep            # Dependency management
├── Makefile.export         # Export settings
├── Makefile.extmod         # External modules
├── Makefile.freertos       # FreeRTOS build
├── Makefile.m2354bsp       # BSP build
└── tools.mk                # Tool configuration
```

**Role**:
- Define build rules
- Configure compiler options
- Manage dependencies

### os

OS abstraction layer.

```
os/
└── freertos/
    ├── defaults.c          # Default settings
    ├── freertos_commands.c # FreeRTOS commands
    ├── Makefile
    ├── _test/              # Tests
    └── include/
```

**Role**:
- FreeRTOS wrapper functions
- OS abstraction interfaces
- Default tasks and hook functions

### scripts

Build-related scripts.

```
scripts/
├── appbuild.mk             # Application build paths
├── ARM_EABI_TOOLCHAIN.mk   # Toolchain configuration
├── FREERTOS.mk             # FreeRTOS configuration
└── M2354BSP.mk             # BSP configuration
```

**Role**:
- Configure toolchain path
- Define build rules
- Configure modules

### secure

Secure firmware binaries and related sources.

```
secure/
└── V2.0.0/
    └── GENERIC_M2354_KPQC/
        └── SINGLE/
            ├── abm_v3/         # ABM (Axio Boot Manager)
            ├── include/        # Secure headers
            ├── secure/         # Secure-world code
            └── sprom/          # Secure firmware binary
                └── sprom_GENERIC_M2354_KPQC.bin
```

**Role**:
- Secure Boot
- Device authentication
- Provide Secure services

### sys

System-level services and utilities.

```
sys/
├── axiocrypto_nonsecure_sdk/  # Crypto SDK
├── axiocrypto_pqc_example/    # PQC examples
├── hexdump/                   # Hex dump
├── isrpipe/                   # ISR pipe
├── nscbroker/                 # NSC broker
├── printf/                    # Print functions
├── shell/                     # Shell interface
├── syscall/                   # System calls
├── tsrb/                      # Thread-safe ring buffer
├── uart_stdin/                # UART input
├── uart_stdout/               # UART output
├── utils/                     # Utilities
└── version/                   # Version information
```

**Role**:
- Provide system services
- Utility functions
- Communication interfaces

### tools

```
tools/
├── axsign                  # Firmware signing tool
└── axtool                  # Miscellaneous tools
```

**Role**:
- Firmware signing
- Certificate management

## Build outputs

Build artifacts are generated under:

```
applications/<app_name>/bin/SHIELD_M2354/
├── <app_name>.elf          # ELF executable
├── <app_name>.bin          # Binary image
├── <app_name>.hex          # Intel HEX
└── <app_name>.map          # Linker map
```

[← Previous: Memory layout](08.memory-layout.md) | [Back to main](main.md)
