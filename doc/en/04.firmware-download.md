<p align="right">
  <a href="04.firmware-download.md">English</a> | <a href="../04.firmware-download.md">한국어</a>
</p>

# Firmware Download

Program firmware onto the M2354 chip using the Nuvoton ICP Tool.

## Prerequisites

1. **Install Nuvoton ICP Tool**
   - Download the ICP Programming Tool from the Nuvoton website.
   - It can be run on Windows.
2. **USB connection**
   - The M2354 board can be connected to the PC via USB.
   - Connect the board's debug interface to the PC using the USB cable.
3. **Prepare firmware images**
   - Secure firmware: use `secure/V2.0.0/GENERIC_M2354_KPQC/SINGLE/sprom/sprom_GENERIC_M2354_KPQC.bin`.
   - Non-Secure firmware: after the build completes, `applications/helloworld/bin/SHIELD_M2354/helloworld.lh.bin` will be generated.

## Flashing

### 1. Launch the ICP Tool

1. Open **Nuvoton ICP Programming Tool**.

### 2. Connect the device

1. Click the **Connect** button to verify the device connection.

![Device connection](../images/icp-connect.png)

- If the connection is successful, you should see the message **"Chip Connected with Nu-Link-Pro"**.

### 3. Configure the Secure firmware

1. Select the **APROM** tab.
2. Set **File Path** to:
   - `secure/V2.0.0/GENERIC_M2354_KPQC/SINGLE/sprom/sprom_GENERIC_M2354_KPQC.bin`

### 4. Configure the Non-Secure firmware

1. Select the **APROM_NS** tab.
2. Set **File Path** to:
   - `applications/helloworld/bin/SHIELD_M2354/helloworld.lh.bin`

### 5. Program (flash)

1. In the **Programming** group box, check **APROM**.
2. In the **Programming** group box, check **APROM_NS**.
3. Click **Start** to begin flashing the firmware.

![Firmware configuration and download](../images/icp-firmware-download.png)

4. If the Secure firmware is already programmed, you can program **APROM_NS only**.

### 6. Erase

1. In the **Initialize** menu, click **Operation → Erase Whole Target Chip**.

![Erase whole chip](../images/icp-erase-whole-chip.png)

### 7. Notes
- For detailed ICP Tool features, refer to the user manual on the Nuvoton website.

[← Previous: Build](03.build.md) | [Next: Runtime →](05.runtime.md)
