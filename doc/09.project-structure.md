<p align="right">
  <a href="en/09.project-structure.md">English</a> | <a href="09.project-structure.md">한국어</a>
</p>

# 프로젝트 구조

이 문서는 디렉토리 구조와 역할을 설명합니다.

## 전체 구조

```
MicroPQC/
├── applications/         # 애플리케이션 코드
├── boards/               # 보드 지원 파일
├── cpu/                  # CPU 관련 코드
├── doc/                  # 문서
├── drivers/              # 하드웨어 드라이버
├── extmodules/           # 외부 모듈
├── makefiles/            # 빌드 시스템
├── os/                   # RTOS
├── scripts/              # 스크립트
├── secure/               # 시큐어펌웨어
├── sys/                  # 유틸리티
├── tools/                # 개발 도구
├── Makefile.base         # 기본 Makefile
├── Makefile.include      # 공통 설정
└── README.md             # 프로젝트 설명
```

## 주요 디렉토리 상세

### applications

사용자 애플리케이션 코드가 위치하는 디렉토리입니다.

```
applications/
└── helloworld/
    ├── main.c              # 메인 진입점
    ├── commands.c          # Shell 명령어 구현
    ├── Makefile            # 빌드 설정
    ├── bin/                # 빌드 출력
    └── include/            # FreeRTOS 설정
        ├── FreeRTOSConfig.h
        └── FreeRTOSConfig_tz.h
```

**역할**
- 애플리케이션 로직 구현
- 사용자 정의 명령어 추가
- FreeRTOS 설정

### boards

보드별 하드웨어 초기화 및 설정 파일입니다.

```
boards/
└── SHIELD_M2354/
    ├── board.c             # 보드 초기화
    ├── periph_conf.c       # 주변장치 설정
    ├── extflash.c          # 외부 플래시
    ├── Makefile            # 보드 빌드 설정
    ├── _test/              # 보드 테스트
    └── include/
        ├── board.h
        └── periph_conf.h
```

**역할**:
- 보드 초기화
- 보드 주변장치 설정

### cpu

CPU 관련 저수준 코드입니다.

```
cpu/
└── nuvoton_m2354/
    ├── cpu.c               # CPU 초기화
    ├── m2354.ld            # 링커 스크립트
    ├── periph_wrap.c       # 주변장치 래퍼
    ├── pin_def.c           # 핀 정의
    ├── Makefile
    ├── _test/
    └── include/
        ├── cpu.h
        ├── periph_api.h
        └── periph_def.h
```

**역할**:
- CPU 초기화 및 설정
- 메모리 레이아웃 정의

### extmodules

외부 라이브러리 및 모듈입니다.

```
extmodules/
├── FREERTOS-Kernel/        # FreeRTOS 소스
│   ├── License/
│   └── Source/
│       ├── portable/       # 포팅 레이어
│       ├── include/        # 헤더 파일
│       └── *.c             # 코어 파일
└── M2354BSP/               # M2354 BSP
    └── Library/
        ├── CMSIS/          # ARM CMSIS
        ├── Device/         # 디바이스 헤더
        ├── LCDLib/         # LCD
        └── StdDriver/      # 표준 드라이버
```

**역할**:
- FreeRTOS 운영체제
- Nuvoton M2354 BSP

### makefiles

빌드 시스템 관련 Makefile입니다.

```
makefiles/
├── Makefile.dep            # 의존성 관리
├── Makefile.export         # Export 설정
├── Makefile.extmod         # 외부 모듈
├── Makefile.freertos       # FreeRTOS 빌드
├── Makefile.m2354bsp       # BSP 빌드
└── tools.mk                # 도구 설정
```

**역할**:
- 빌드 규칙 정의
- 컴파일 옵션 설정
- 의존성 관리

### os

운영체제 추상화 레이어입니다.

```
os/
└── freertos/
    ├── defaults.c          # 기본 설정
    ├── freertos_commands.c # FreeRTOS 명령어
    ├── Makefile
    ├── _test/              # 테스트
    └── include/
```

**역할**:
- FreeRTOS 래퍼 함수
- OS 추상화 인터페이스
- 기본 태스크 및 훅 함수

### scripts

빌드 관련 스크립트 파일입니다.

```
scripts/
├── appbuild.mk             # 애플리케이션 빌드 경로
├── ARM_EABI_TOOLCHAIN.mk   # Toolchain 설정
├── FREERTOS.mk             # FreeRTOS 설정
└── M2354BSP.mk             # BSP 설정
```

**역할**:
- Toolchain 경로 설정
- 빌드 규칙 정의
- 모듈 설정

### secure

Secure 펌웨어 바이너리입니다.

```
secure/
└── V2.0.0/
    └── GENERIC_M2354_KPQC/
        └── SINGLE/
            ├── abm_v3/         # ABM (Axio Boot Manager)
            ├── include/        # Secure 헤더
            ├── secure/         # Secure 영역 코드
            └── sprom/          # Secure 펌웨어 바이너리
                └── sprom_GENERIC_M2354_KPQC.bin
```

**역할**:
- Secure Boot
- 디바이스 인증
- Secure 서비스 제공

### sys

시스템 레벨 서비스 및 유틸리티입니다.

```
sys/
├── axiocrypto_nonsecure_sdk/  # 암호화 SDK
├── axiocrypto_pqc_example/    # PQC 예제
├── hexdump/                   # Hex 덤프
├── isrpipe/                   # ISR 파이프
├── nscbroker/                 # NSC 브로커
├── printf/                    # Print 함수
├── shell/                     # Shell 인터페이스
├── syscall/                   # 시스템 콜
├── tsrb/                      # Thread-safe 링 버퍼
├── uart_stdin/                # UART 입력
├── uart_stdout/               # UART 출력
├── utils/                     # 유틸성 함수
└── version/                   # 버전 정보
```

**역할**:
- 시스템 서비스 제공
- 유틸리티 함수
- 통신 인터페이스


### tools

```
tools/
├── axsign                  # 펌웨어 서명 도구
└── axtool                  # 기타 도구
```

**역할**:
- 펌웨어 서명
- 인증서 관리

## 빌드 출력

빌드 결과물은 다음 위치에 생성됩니다:

```
applications/<app_name>/bin/SHIELD_M2354/
├── <app_name>.elf          # ELF 실행 파일
├── <app_name>.bin          # 바이너리 파일
├── <app_name>.hex          # HEX 파일
└── <app_name>.map          # 메모리 맵
```

[← 이전: 메모리 레이아웃](08.memory-layout.md) | [메인 페이지로 돌아가기](main.md)
